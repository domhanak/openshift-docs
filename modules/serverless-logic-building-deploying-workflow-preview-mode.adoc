// Module included in the following assemblies:
//
// * serverless/serverless-logic/serverless-logic-creating-managing-workflows.adoc

:_mod-docs-content-type: PROCEDURE
[id="serverless-logic-building-deploying-workflow-preview-mode_{context}"]
= Building and deploying your workflow

You can create a `SonataFlow` custom resource (CR) on {ocp-product-title} and {ServerlessLogicOperatorName} builds and deploys the workflow. 

.Prerequisites

* You have an {ServerlessLogicOperatorName} installed on your cluster.
* You have access to an {ServerlessLogicProductName} project with the appropriate roles and permissions to create applications and other workloads in {ocp-product-title}.
* You have installed the {ServerlessLogicProductName} `kn-workflow` CLI plugin.
* You have installed the OpenShift CLI `(oc)`.

.Procedure

. In your project application directory, execute the following command:
+
[source,terminal]
----
$ kn workflow gen-manifest --profile=preview --namespace <your_namespace>
----
+
This command generates {ocp-product-title} YAML manifests based on your `workflow.sw.json|yaml` definition. The default location is the `<project_application_dir>/manifests` directory.
You can modify these files to your preference, however, when you rerun the above command, the changes will be overwritten. Use the `--custom-generated-manifests-dir` or `-c` flag to generate the files in different locations.

. Deploy the `SonataFlow` workflow application to your {ocp-product-title} namespace by running the following command:
+
[source,terminal]
----
$ kn workflow deploy --custom-manifests-dir=./manifests --namespace <your_namespace>
----

. List all the build configurations by running the following command:
+
[source,terminal]
----
$ oc get buildconfigs -n workflows
----

. Get the logs of the build process by running the following command:
+
[source,terminal]
----
$ oc logs buildconfig/<workflow-name> -n <your_namespace>
----
.Example command for a workflow that has ID attribute with value `greeting`:
[source,terminal]
----
$ oc logs buildconfig/greeting -n workflows
----

.Verification

. To verify the deployment, list all the pods by running the following command:
+
[source,terminal]
----
$ oc get pods -n <your_namespace>
----

Ensure that the pod corresponding to your workflow is running.

. Check the running pods and their logs by running the following command:
+
[source,terminal]
----
$ oc logs pod/<pod-name> -n workflows
----

.Cleanup
. To cleanup the deployment, delete the projects resources running the following command:
+
[source,terminal]
----
$ kn workflow undeploy -n <your_namespace>
----